{
  "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
  "contentVersion": "1.0.0.0",
  "parameters": {
    "existingLogicalServerName": {
      "type": "string",
      "metadata": {
        "description": "Omit 'database.windows.net'"
      }
    },
    "requestedServiceObjectiveName": {
      "type": "string",
      "defaultValue": "DW100"
    },
    "location": {
      "type": "string",
      "defaultValue": "EastUS",
      "metadata": {
        "description": "The Azure region for this deployment"
      }
    },
    "environment": {
      "type": "string",
      "defaultValue": "Dev",
      "metadata": {
        "description": "The abbreviated environment label"
      }
    },
    "application": {
      "type": "string",
      "defaultValue": "APP",
      "metadata": {
        "description": "The abbreviated application name"
      }
    },
    "region": {
      "type": "string",
      "defaultValue": "AM",
      "metadata": {
        "description": "The abbreviated Azure Region code"
      }
    }
  },
  "variables": {
    "baseNamingPrefix": "[concat(parameters('region'), '-',  parameters('location'), '-', parameters('environment'), '-', parameters('application'))]",
    "enabledForDeployment": "True",
    "enabledForTemplateDeployment": "True",
    "tenantId": "[subscription().subscriptionId]",
    "datawarehouseName": "[tolower(concat('dw-', variables('baseNamingPrefix')))]",
    "existingLogicalServerName": "[tolower(parameters('existingLogicalServerName'))]"
  },
  "resources": [
    {
      "type": "Microsoft.Sql/servers/databases",
      "name": "[concat(variables('existingLogicalServerName'), '/', variables('datawarehouseName'))]",
      "apiVersion": "2014-04-01-preview",
      "location": "[resourceGroup().location]",
      "scale": null,
      "properties": {
        "databaseId": "00000000-0000-0000-0000-000000000000",
        "edition": "DataWarehouse",
        "status": "Pausing",
        "serviceLevelObjective": "[parameters('requestedServiceObjectiveName')]",
        "collation": "SQL_Latin1_General_CP1_CI_AS",
        "maxSizeBytes": "263882790666240",
        "requestedServiceObjectiveName": "[parameters('requestedServiceObjectiveName')]"
      }
    }
  ]
}