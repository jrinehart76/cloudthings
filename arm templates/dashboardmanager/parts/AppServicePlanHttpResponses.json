{
    "name" : "AppServicePlanHttpResponses",
    "part" : {
        "position": {
          "x": 14,
          "y": 1,
          "colSpan": 7,
          "rowSpan": 4
        },
        "metadata": {
          "inputs": [
            {
              "name": "ComponentId",
              "value": "[variables('OMSWorkspace')]"
            },
            {
              "name": "Query",
              "value": "[concat('AzureMetrics\r\n| where TimeGenerated > now(-24h)\r\n//| where split(_ResourceId, \"/\", 4) in (', parameters('ResourceGroups'), ')| where ResourceProvider has \".web\" and MetricName contains \"http\" and MetricName !contains \"responsetime\" and MetricName !contains \"queuelength\" \r\n| summarize [\"HTTP Code Count\"]=sum(Total) by [\"HTTP Response\"]=MetricName, bin(TimeGenerated, 15m)\r\n| render timechart')]"
            },
            {
              "name": "Dimensions",
              "value": {
                "xAxis": {
                  "name": "TimeGenerated",
                  "type": "datetime"
                },
                "yAxis": [
                  {
                    "name": "HTTP Code Count",
                    "type": "real"
                  }
                ],
                "splitBy": [
                  {
                    "name": "HTTP Response",
                    "type": "string"
                  }
                ],
                "aggregation": "Sum"
              }
            },
            {
              "name": "Version",
              "value": "1.0"
            },
            {
              "name": "PartTitle",
              "value": "Analytics"
            },
            {
              "name": "PartSubTitle",
              "value": "[parameters('OMSWorkspace')]"
            },
            {
              "name": "resourceTypeMode",
              "value": "workspace"
            },
            {
              "name": "ControlType",
              "value": "AnalyticsChart"
            },
            {
              "name": "SpecificChart",
              "value": "Line"
            },
            {
              "name": "TimeRange",
              "isOptional": true
            },
            {
              "name": "DashboardId",
              "isOptional": true
            }
          ],
          "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
          "settings": {
            "content": {
              "PartTitle": "App Service HTTP Responses",
              "PartSubTitle": "Last 24 Hours"
            }
          },
          "asset": {
            "idInputName": "ComponentId",
            "type": "ApplicationInsights"
          }
        }
      }
}