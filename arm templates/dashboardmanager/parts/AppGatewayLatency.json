{
  "name": "AppGatewayLatency",
  "part": {
    "position": {
      "x": 14,
      "y": 1,
      "colSpan": 7,
      "rowSpan": 4
    },
    "metadata": {
      "inputs": [
        {
          "name": "ComponentId",
          "value": "[variables('OMSWorkspace')]"
        },
        {
          "name": "Query",
          "value": "[concat('AzureDiagnostics | where TimeGenerated > now(-24h) | where ResourceProvider has \"microsoft.network\"\n| where OperationName contains \"gatewayperformance\"\n| where split(_ResourceId, \"/\", 4) in (', parameters('ResourceGroups'), ')\r\n| summarize averageLatency=avg(latency_d) by Gateway=Resource, bin(TimeGenerated, 15m)\n| render timechart')]"
        },
        {
          "name": "Dimensions",
          "value": {
            "xAxis": {
              "name": "TimeGenerated",
              "type": "DateTime"
            },
            "yAxis": [
              {
                "name": "averageLatency",
                "type": "Double"
              }
            ],
            "splitBy": [
              {
                "name": "Gateway",
                "type": "String"
              }
            ],
            "aggregation": "Average"
          }
        },
        {
          "name": "Version",
          "value": "1.0"
        },
        {
          "name": "PartTitle",
          "value": "Analytics"
        },
        {
          "name": "PartSubTitle",
          "value": "[parameters('OMSWorkspace')]"
        },
        {
          "name": "resourceTypeMode",
          "value": "workspace"
        },
        {
          "name": "ControlType",
          "value": "AnalyticsChart"
        },
        {
          "name": "SpecificChart",
          "value": "Line"
        },
        {
          "name": "TimeRange",
          "isOptional": true
        },
        {
          "name": "DashboardId",
          "isOptional": true
        }
      ],
      "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
      "settings": {
        "content": {
          "PartTitle": "AppGateway Latency",
          "PartSubTitle": "Last 24 Hours"
        }
      },
      "asset": {
        "idInputName": "ComponentId",
        "type": "ApplicationInsights"
      }
    }
  }
}