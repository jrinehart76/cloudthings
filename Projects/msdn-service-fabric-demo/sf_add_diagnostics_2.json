{
    "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
    "contentVersion": "1.0.0.0",
    "parameters": {
        "vaults_msdnfabricvault_name": {
            "defaultValue": "msdnfabricvault",
            "type": "String"
        },
        "clusters_msdnfabric01_name": {
            "defaultValue": "msdnfabric01",
            "type": "String"
        },
        "storageAccounts_sfdgmsdnfabric011093_name": {
            "defaultValue": "sfstgdiagvotingset01",
            "type": "String"
        },
        "storageAccounts_sflogsmsdnfabric011223_name": {
            "defaultValue": "sfstglogsvotingset01",
            "type": "String"
        }
    },
    "variables": {},
    "resources": [
        {
            "comments": "Generalized from resource: '/subscriptions/f6cc61fe-1ed2-4223-b16d-e59db2e5b242/resourceGroups/msdn-servicefabric/providers/Microsoft.Compute/virtualMachineScaleSets/votingset01'.",
            "type": "Microsoft.Compute/virtualMachineScaleSets",
            "properties": {
                "virtualMachineProfile": {
                    "extensionProfile": {
                        "extensions": [
                            {
                                "properties": {
                                    "publisher": "Microsoft.Azure.ServiceFabric",
                                    "type": "ServiceFabricNode",
                                    "typeHandlerVersion": "1.0",
                                    "autoUpgradeMinorVersion": true,
                                    "settings": {
                                        "clusterEndpoint": "https://southcentralus.servicefabric.azure.com/runtime/clusters/0290fba3-53d5-4df6-86c3-51e98a4ddacb",
                                        "nodeTypeRef": "[parameters('virtualMachineScaleSets_votingset01_name')]",
                                        "dataPath": "D:\\\\SvcFab",
                                        "durabilityLevel": "Bronze",
                                        "enableParallelJobs": true,
                                        "nicPrefixOverride": "10.0.0.0/24",
                                        "certificate": {
                                            "thumbprint": "9C8C68CE9794D2FD6F4BD206336FF05AE8AC6D53",
                                            "x509StoreName": "My"
                                        }
                                    }
                                },
                                "name": "[concat(parameters('virtualMachineScaleSets_votingset01_name'),'_ServiceFabricNode')]"
                            },
                            {
                                "properties": {
                                    "publisher": "Microsoft.Azure.Diagnostics",
                                    "type": "IaaSDiagnostics",
                                    "typeHandlerVersion": "1.5",
                                    "autoUpgradeMinorVersion": true,
                                    "settings": {
                                        "WadCfg": {
                                            "DiagnosticMonitorConfiguration": {
                                                "overallQuotaInMB": "50000",
                                                "EtwProviders": {
                                                    "EtwEventSourceProviderConfiguration": [
                                                        {
                                                            "provider": "Microsoft-ServiceFabric-Actors",
                                                            "scheduledTransferKeywordFilter": "1",
                                                            "scheduledTransferPeriod": "PT5M",
                                                            "DefaultEvents": {
                                                                "eventDestination": "ServiceFabricReliableActorEventTable"
                                                            }
                                                        },
                                                        {
                                                            "provider": "Microsoft-ServiceFabric-Services",
                                                            "scheduledTransferPeriod": "PT5M",
                                                            "DefaultEvents": {
                                                                "eventDestination": "ServiceFabricReliableServiceEventTable"
                                                            }
                                                        }
                                                    ],
                                                    "EtwManifestProviderConfiguration": [
                                                        {
                                                            "provider": "cbd93bc2-71e5-4566-b3a7-595d8eeca6e8",
                                                            "scheduledTransferLogLevelFilter": "Information",
                                                            "scheduledTransferKeywordFilter": "4611686018427387904",
                                                            "scheduledTransferPeriod": "PT5M",
                                                            "DefaultEvents": {
                                                                "eventDestination": "ServiceFabricSystemEventTable"
                                                            }
                                                        }
                                                    ]
                                                }
                                            }
                                        },
                                        "StorageAccount": "sfdgmsdnfabric011093"
                                    }
                                },
                                "name": "VMDiagnosticsVmExt_vmNodeType0Name"
                            }
                        ]
                    }
                },
                "overprovision": false
            }
         }
    ]
}