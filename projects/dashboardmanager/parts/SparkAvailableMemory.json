{
    "name": "SparkAvailableMemory",
    "part": {
        "position": {
            "x": 8,
            "y": 5,
            "colSpan": 8,
            "rowSpan": 3
        },
        "metadata": {
            "inputs": [
                {
                    "name": "ComponentId",
                    "value": "[variables('OMSWorkspace')]"
                },
                {
                    "name": "Query",
                    "value": "metrics_resourcemanager_queue_root_CL\r\n| where TimeGenerated > now(-1d) \r\n| where ClusterType_s == \"spark\"\r\n| summarize AvailableGB = max((AvailableMB_d / 1024)) by bin(TimeGenerated, 15m), ClusterName_s\r\n| render timechart \r\n"
                },
                {
                    "name": "Dimensions",
                    "value": {
                        "xAxis": {
                            "name": "TimeGenerated",
                            "type": "DateTime"
                        },
                        "yAxis": [
                            {
                                "name": "AvailableGB",
                                "type": "Double"
                            }
                        ],
                        "splitBy": [
                            {
                                "name": "ClusterName_s",
                                "type": "String"
                            }
                        ],
                        "aggregation": "Maximum"
                    }
                },
                {
                    "name": "Version",
                    "value": "1.0"
                },
                {
                    "name": "DashboardId",
                    "value": "/subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/dashboards/providers/Microsoft.Portal/dashboards/00000000-0000-0000-0000-000000000000"
                },
                {
                    "name": "PartTitle",
                    "value": "Analytics"
                },
                {
                    "name": "PartSubTitle",
                    "value": "la-am-eastus-NonProd-DataLake"
                },
                {
                    "name": "resourceTypeMode",
                    "value": "workspace"
                },
                {
                    "name": "ControlType",
                    "value": "AnalyticsChart"
                },
                {
                    "name": "SpecificChart",
                    "value": "Line"
                },
                {
                    "name": "TimeRange",
                    "isOptional": true
                }
            ],
            "type": "Extension/AppInsightsExtension/PartType/AnalyticsPart",
            "settings": {
                "content": {
                    "PartTitle": "Spark Available Memory (in GB)",
                    "PartSubTitle": "Last 24 hours"
                }
            },
            "asset": {
                "idInputName": "ComponentId",
                "type": "ApplicationInsights"
            }
        }
    }
}